import{a as b}from"./chunk-QKNJGQYQ.js";import{a as J}from"./chunk-YBGVE5ZM.js";import"./chunk-XXZ5Y7XX.js";import{$ as s,Ea as $,F as S,Hb as O,Ia as B,Ib as y,J as E,Jb as R,K as _,Kb as q,Lb as H,M as x,Mb as K,N as A,Nb as P,Pb as W,Sb as z,T as l,U as d,W as v,Wa as I,X as p,Y as T,aa as a,ba as c,ea as V,fa as u,ga as F,gb as M,ka as f,la as N,ma as k,mb as j,ob as D,pa as g,qa as h,ua as w,vb as G,wa as L}from"./chunk-5WL5R7UM.js";function X(r,e){if(r&1&&(s(0,"ul",15)(1,"li"),f(2),g(3,"async"),a()()),r&2){let m=F();l(2),N(h(3,1,m.editorFormErrors$))}}function Y(r,e){if(r&1){let m=V();s(0,"span",16)(1,"i",17),u("click",function(){let o=x(m).index,n=F();return A(n.removeTag(o))}),a(),f(2),a()}if(r&2){let m=e.$implicit;l(2),k(" ",m," ")}}var C=(()=>{let e=class e{constructor(t,i,o){this.fb=t,this.store=i,this.route=o,this.editorForm=this.fb.group({title:["",y.required],description:["",y.required],body:["",y.required],tag:[""]}),this.tagList=[],this.isFormSubmitting$=this.store.select(n=>G(n)),this.isHavingValidationErrors$=this.store.select(n=>j(n)),this.editorFormErrors$=this.store.select(n=>D(n)),this.selectedArticle$=this.store.select(n=>J(n))}ngOnDestroy(){this.selectedArticleSubcription.unsubscribe()}ngOnInit(){let t=this.route.snapshot.paramMap.get("slug");t!=null&&(this.selectedArticleSubcription=this.selectedArticle$.subscribe(i=>{i!==null&&(this.editorForm.patchValue({title:i.title,description:i.description,body:i.body}),this.tagList=[...i.tagList])}))}addTag(){let t=this.editorForm.value.tag;t===""||t===null||t===void 0||this.tagList.includes(t)||(this.tagList.push(t),this.editorForm.patchValue({tag:""}))}trackByFn(t,i){return i}removeTag(t){this.tagList.splice(t,1)}submitForm(){let t={title:this.editorForm.value.title,description:this.editorForm.value.description,body:this.editorForm.value.body,tagList:this.tagList,slug:this.route.snapshot.paramMap.get("slug"),createdAt:null,updatedAt:null,favorited:null,author:null,favoritesCount:null};console.log(t),this.store.dispatch(M.submitEditorForm({article:t}))}};e.\u0275fac=function(i){return new(i||e)(d(W),d(I),d($))},e.\u0275cmp=E({type:e,selectors:[["rw-editor"]],decls:22,vars:9,consts:[[1,"editor-page"],[1,"container","page"],[1,"row"],[1,"col-md-10","offset-md-1","col-xs-12"],["class","error-messages"],[3,"formGroup","ngSubmit"],["editorFormTemplateVar",""],[1,"form-group"],["formControlName","title","type","text","placeholder","Article Title",1,"form-control","form-control-lg"],["formControlName","description","type","text","placeholder","What's this article about?",1,"form-control"],["formControlName","body","rows","8","placeholder","Write your article (in markdown)",1,"form-control"],["formControlName","tag","type","text","placeholder","Enter tags",1,"form-control",3,"keyup.space"],[1,"tag-list"],["class","tag-default tag-pill",4,"ngFor","ngForOf","ngForTrackBy"],["type","submit",1,"btn","btn-lg","pull-xs-right","btn-primary",3,"disabled"],[1,"error-messages"],[1,"tag-default","tag-pill"],[1,"ion-close-round",3,"click"]],template:function(i,o){i&1&&(s(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),v(4,X,4,3,"ul",4),g(5,"async"),s(6,"form",5,6),u("ngSubmit",function(){return o.submitForm()}),s(8,"fieldset")(9,"fieldset",7),c(10,"input",8),a(),s(11,"fieldset",7),c(12,"input",9),a(),s(13,"fieldset",7),c(14,"textarea",10),a(),s(15,"fieldset",7)(16,"input",11),u("keyup.space",function(){return o.addTag()}),a(),s(17,"div",12),v(18,Y,3,1,"span",13),a()(),s(19,"button",14),g(20,"async"),f(21," Publish Article "),a()()()()()()()),i&2&&(l(4),T(4,h(5,5,o.isHavingValidationErrors$)===!0?4:-1),l(2),p("formGroup",o.editorForm),l(12),p("ngForOf",o.tagList)("ngForTrackBy",o.trackByFn),l(),p("disabled",h(20,7,o.isFormSubmitting$)===!0))},dependencies:[w,H,O,R,q,K,P,L],encapsulation:2});let r=e;return r})();var Q=[{path:"",component:C,canActivate:[b]},{path:":slug",component:C,canActivate:[b]}];var Et=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=_({type:e}),e.\u0275inj=S({imports:[B.forChild(Q),z]});let r=e;return r})();export{Et as EditorModule};
