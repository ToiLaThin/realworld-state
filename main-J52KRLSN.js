import{a as O,b as Si}from"./chunk-LMISWEH2.js";import{a as Ei}from"./chunk-OOYBFLCY.js";import{a as $,b as yi,c as Ai}from"./chunk-XXZ5Y7XX.js";import{$ as h,$a as ci,A as T,Aa as it,Ab as W,B as xt,Ba as We,Bb as gi,C as D,Ca as Ye,Cb as vi,D as Ue,Da as Qe,E as y,F as _,Fa as ti,G as N,Ga as ut,H as f,Ha as rt,Hb as kt,I as ft,Ia as Ct,Ib as nt,J as X,Ja as ei,Jb as Pt,K as H,Ka as ii,Kb as Dt,Lb as Nt,Mb as Lt,Nb as Ut,O as Be,Oa as ie,P as te,Pa as Ft,Pb as Bt,Qa as ri,R as _e,Ra as oi,S as Tt,Sa as ni,Sb as dt,T as M,Ta as re,U as et,Ua as jt,V as He,Va as si,W as ee,Wa as z,X as Q,Y as ze,Za as oe,_a as ne,a as Y,aa as v,b as at,ba as B,c as St,cb as G,d as Te,db as Ot,e as we,eb as se,f as Ce,fa as Et,fb as $t,g as Fe,ga as Ve,gb as J,h as je,ha as Ge,hb as F,i as I,ia as Ke,ib as mt,j as Oe,jb as ai,k as p,ka as C,kb as li,l as Wt,la as wt,lb as fi,m as lt,ma as qe,mb as Rt,n as Z,nb as Mt,o as w,p as Yt,pa as L,q as $e,qa as U,qb as pi,r as bt,rb as ui,s as Re,sa as Ze,sb as mi,t as Me,u as ke,v as Qt,w as Pe,wa as pt,wb as di,x as De,xb as hi,y as Ne,ya as Xe,z as Le,za as Je}from"./chunk-5WL5R7UM.js";function Fr(e,t){e&1&&(h(0,"li",4)(1,"a",6),C(2,"Sign in"),v()(),h(3,"li",4)(4,"a",7),C(5,"Sign up"),v()())}function jr(e,t){if(e&1&&(h(0,"li",4)(1,"a",8),B(2,"i",9),C(3,"\xA0New Article "),v()(),h(4,"li",4)(5,"a",10),B(6,"i",11),C(7,"\xA0Settings "),v()(),h(8,"li",4)(9,"a",12),L(10,"async"),B(11,"img",13),L(12,"async"),C(13),L(14,"async"),v()()),e&2){let n=Ve(),i,r,s;M(9),Ke("routerLink","/profile/",(i=U(10,3,n.currUser$))==null?null:i.username,""),M(2),Ge("src",(r=U(12,5,n.currUser$))==null?null:r.image,_e),M(2),qe(" ",(s=U(14,7,n.currUser$))==null?null:s.username," ")}}var bi=(()=>{let t=class t{constructor(i){this.store=i,this.isLoggedIn$=this.store.select(r=>fi(r)),this.currUser$=this.store.select(r=>li(r))}};t.\u0275fac=function(r){return new(r||t)(et(z))},t.\u0275cmp=X({type:t,selectors:[["rw-layout-header"]],decls:11,vars:3,consts:[[1,"navbar","navbar-light"],[1,"container"],["routerLink","/",1,"navbar-brand"],[1,"nav","navbar-nav","pull-xs-right"],[1,"nav-item"],["routerLink","/",1,"nav-link","active"],["routerLink","/login",1,"nav-link"],["routerLink","/register",1,"nav-link"],["routerLink","/editor",1,"nav-link"],[1,"ion-compose"],["routerLink","/settings",1,"nav-link"],[1,"ion-gear-a"],[1,"nav-link",3,"routerLink"],[1,"user-pic",3,"src"]],template:function(r,s){r&1&&(h(0,"nav",0)(1,"div",1)(2,"a",2),C(3,"conduit"),v(),h(4,"ul",3)(5,"li",4)(6,"a",5),C(7,"Home"),v()(),ee(8,Fr,6,0),L(9,"async"),ee(10,jr,15,9),v()()()),r&2&&(M(8),ze(8,U(9,1,s.isLoggedIn$)!==!0?8:10))},dependencies:[rt,pt],encapsulation:2});let e=t;return e})();var xi=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=X({type:t,selectors:[["rw-layout-footer"]],decls:9,vars:0,consts:[[1,"container"],["routerLink","/",1,"logo-font"],[1,"attribution"],["routerLink","https://thinkster.io"]],template:function(r,s){r&1&&(h(0,"footer")(1,"div",0)(2,"a",1),C(3,"conduit"),v(),h(4,"span",2),C(5," An interactive learning project from "),h(6,"a",3),C(7,"Thinkster"),v(),C(8,". Code & design licensed under MIT. "),v()()())},dependencies:[rt],encapsulation:2});let e=t;return e})();var Ti=(()=>{let t=class t{constructor(){this.title="realworld-state-test"}};t.\u0275fac=function(r){return new(r||t)},t.\u0275cmp=X({type:t,selectors:[["rw-root"]],decls:3,vars:0,template:function(r,s){r&1&&B(0,"rw-layout-header")(1,"router-outlet")(2,"rw-layout-footer")},dependencies:[ti,bi,xi],encapsulation:2});let e=t;return e})();var wi=[{path:"",loadChildren:()=>import("./chunk-PO2J5X7F.js").then(e=>e.HomeModule)},{path:"settings",loadChildren:()=>import("./chunk-QYDSGT4U.js").then(e=>e.SettingModule)},{path:"editor",loadChildren:()=>import("./chunk-ORYFLYFR.js").then(e=>e.EditorModule)},{path:"profile",loadChildren:()=>import("./chunk-PY54I65Q.js").then(e=>e.ProfileModule)},{path:"article",loadChildren:()=>import("./chunk-LYMG73I3.js").then(e=>e.ArticleModule)}];var ht=(()=>{let t=class t{constructor(){this.jwtKey="jwtToken"}getToken(){return window.localStorage[this.jwtKey]}saveToken(i){window.localStorage[this.jwtKey]=i}destroyToken(){window.localStorage.removeItem(this.jwtKey)}};t.\u0275fac=function(r){return new(r||t)},t.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Ci=(()=>{let t=class t{constructor(i){this.jwtService=i}intercept(i,r){let s={"Content-Type":"application/json",Accept:"application/json"},l=this.jwtService.getToken();l&&(s.Authorization=`Token ${l}`);let o=i.clone({setHeaders:s});return r.handle(o)}};t.\u0275fac=function(r){return new(r||t)(f(ht))},t.\u0275prov=y({token:t,factory:t.\u0275fac});let e=t;return e})();var Fi=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=H({type:t}),t.\u0275inj=_({providers:[{provide:We,useClass:Ci,multi:!0}],imports:[dt]});let e=t;return e})();var It="PERFORM_ACTION",Rr="REFRESH",Di="RESET",Ni="ROLLBACK",Li="COMMIT",Ui="SWEEP",Bi="TOGGLE_ACTION",_i="SET_ACTIONS_ACTIVE",Hi="JUMP_TO_STATE",zi="JUMP_TO_ACTION",ye="IMPORT_STATE",Vi="LOCK_CHANGES",Gi="PAUSE_RECORDING",gt=class{constructor(t,n){if(this.action=t,this.timestamp=n,this.type=It,typeof t.type>"u")throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?')}},ae=class{constructor(){this.type=Rr}},le=class{constructor(t){this.timestamp=t,this.type=Di}},fe=class{constructor(t){this.timestamp=t,this.type=Ni}},pe=class{constructor(t){this.timestamp=t,this.type=Li}},ue=class{constructor(){this.type=Ui}},me=class{constructor(t){this.id=t,this.type=Bi}},ji=class{constructor(t,n,i=!0){this.start=t,this.end=n,this.active=i,this.type=_i}},de=class{constructor(t){this.index=t,this.type=Hi}},he=class{constructor(t){this.actionId=t,this.type=zi}},ge=class{constructor(t){this.nextLiftedState=t,this.type=ye}},ve=class{constructor(t){this.status=t,this.type=Vi}},Se=class{constructor(t){this.status=t,this.type=Gi}},Oi=class{constructor(){this.maxAge=!1}},Vt=new N("@ngrx/store-devtools Options"),$i=new N("@ngrx/store-devtools Initial Config");function Ki(){return null}var Mr="NgRx Store DevTools";function kr(e){let t={maxAge:!1,monitor:Ki,actionSanitizer:void 0,stateSanitizer:void 0,name:Mr,serialize:!1,logOnly:!1,autoPause:!1,trace:!1,traceLimit:75,features:{pause:!0,lock:!0,persist:!0,export:!0,import:"custom",jump:!0,skip:!0,reorder:!0,dispatch:!0,test:!0},connectInZone:!1},n=typeof e=="function"?e():e,i=n.logOnly?{pause:!0,export:!0,test:!0}:!1,r=n.features||i||t.features;r.import===!0&&(r.import="custom");let s=Object.assign({},t,{features:r},n);if(s.maxAge&&s.maxAge<2)throw new Error(`Devtools 'maxAge' cannot be less than 2, got ${s.maxAge}`);return s}function Ri(e,t){return e.filter(n=>t.indexOf(n)<0)}function qi(e){let{computedStates:t,currentStateIndex:n}=e;if(n>=t.length){let{state:r}=t[t.length-1];return r}let{state:i}=t[n];return i}function Ho(e){return e.actionsById[e.nextActionId-1]}function At(e){return new gt(e,+Date.now())}function Pr(e,t){return Object.keys(t).reduce((n,i)=>{let r=Number(i);return n[r]=Zi(e,t[r],r),n},{})}function Zi(e,t,n){return at(Y({},t),{action:e(t.action,n)})}function Dr(e,t){return t.map((n,i)=>({state:Xi(e,n.state,i),error:n.error}))}function Xi(e,t,n){return e(t,n)}function Ji(e){return e.predicate||e.actionsSafelist||e.actionsBlocklist}function Nr(e,t,n,i){let r=[],s={},l=[];return e.stagedActionIds.forEach((o,a)=>{let c=e.actionsById[o];c&&(a&&Ae(e.computedStates[a],c,t,n,i)||(s[o]=c,r.push(o),l.push(e.computedStates[a])))}),at(Y({},e),{stagedActionIds:r,actionsById:s,computedStates:l})}function Ae(e,t,n,i,r){let s=n&&!n(e,t.action),l=i&&!t.action.type.match(i.map(a=>Mi(a)).join("|")),o=r&&t.action.type.match(r.map(a=>Mi(a)).join("|"));return s||l||o}function Mi(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Wi(e){return{ngZone:e?ft(He):null,connectInZone:e}}var Gt=(()=>{let t=class t extends Ft{};t.\u0275fac=(()=>{let i;return function(s){return(i||(i=Be(t)))(s||t)}})(),t.\u0275prov=y({token:t,factory:t.\u0275fac});let e=t;return e})(),_t={START:"START",DISPATCH:"DISPATCH",STOP:"STOP",ACTION:"ACTION"},Ee=new N("@ngrx/store-devtools Redux Devtools Extension"),Yi=(()=>{let _DevtoolsExtension=class _DevtoolsExtension{constructor(e,t,n){this.config=t,this.dispatcher=n,this.zoneConfig=Wi(this.config.connectInZone),this.devtoolsExtension=e,this.createActionStreams()}notify(e,t){if(this.devtoolsExtension)if(e.type===It){if(t.isLocked||t.isPaused)return;let n=qi(t);if(Ji(this.config)&&Ae(n,e,this.config.predicate,this.config.actionsSafelist,this.config.actionsBlocklist))return;let i=this.config.stateSanitizer?Xi(this.config.stateSanitizer,n,t.currentStateIndex):n,r=this.config.actionSanitizer?Zi(this.config.actionSanitizer,e,t.nextActionId):e;this.sendToReduxDevtools(()=>this.extensionConnection.send(r,i))}else{let n=at(Y({},t),{stagedActionIds:t.stagedActionIds,actionsById:this.config.actionSanitizer?Pr(this.config.actionSanitizer,t.actionsById):t.actionsById,computedStates:this.config.stateSanitizer?Dr(this.config.stateSanitizer,t.computedStates):t.computedStates});this.sendToReduxDevtools(()=>this.devtoolsExtension.send(null,n,this.getExtensionConfig(this.config)))}}createChangesObservable(){return this.devtoolsExtension?new St(e=>{let t=this.zoneConfig.connectInZone?this.zoneConfig.ngZone.runOutsideAngular(()=>this.devtoolsExtension.connect(this.getExtensionConfig(this.config))):this.devtoolsExtension.connect(this.getExtensionConfig(this.config));return this.extensionConnection=t,t.init(),t.subscribe(n=>e.next(n)),t.unsubscribe}):Fe}createActionStreams(){let e=this.createChangesObservable().pipe(Ne()),t=e.pipe(Z(o=>o.type===_t.START)),n=e.pipe(Z(o=>o.type===_t.STOP)),i=e.pipe(Z(o=>o.type===_t.DISPATCH),p(o=>this.unwrapAction(o.payload)),Yt(o=>o.type===ye?this.dispatcher.pipe(Z(a=>a.type===re),Oe(1e3),$e(1e3),p(()=>o),w(()=>I(o)),bt(1)):I(o))),s=e.pipe(Z(o=>o.type===_t.ACTION),p(o=>this.unwrapAction(o.payload))).pipe(xt(n)),l=i.pipe(xt(n));this.start$=t.pipe(xt(n)),this.actions$=this.start$.pipe(T(()=>s)),this.liftedActions$=this.start$.pipe(T(()=>l))}unwrapAction(action){return typeof action=="string"?eval(`(${action})`):action}getExtensionConfig(e){let t={name:e.name,features:e.features,serialize:e.serialize,autoPause:e.autoPause??!1,trace:e.trace??!1,traceLimit:e.traceLimit??75};return e.maxAge!==!1&&(t.maxAge=e.maxAge),t}sendToReduxDevtools(e){try{e()}catch(t){console.warn("@ngrx/store-devtools: something went wrong inside the redux devtools",t)}}};_DevtoolsExtension.\u0275fac=function(t){return new(t||_DevtoolsExtension)(f(Ee),f(Vt),f(Gt))},_DevtoolsExtension.\u0275prov=y({token:_DevtoolsExtension,factory:_DevtoolsExtension.\u0275fac});let DevtoolsExtension=_DevtoolsExtension;return DevtoolsExtension})(),zt={type:ie},Lr="@ngrx/store-devtools/recompute",Ur={type:Lr};function Qi(e,t,n,i,r){if(i)return{state:n,error:"Interrupted by an error up the chain"};let s=n,l;try{s=e(n,t)}catch(o){l=o.toString(),r.handleError(o)}return{state:s,error:l}}function Ht(e,t,n,i,r,s,l,o,a){if(t>=e.length&&e.length===s.length)return e;let c=e.slice(0,t),S=s.length-(a?1:0);for(let u=t;u<S;u++){let m=s[u],k=r[m].action,g=c[u-1],d=g?g.state:i,K=g?g.error:void 0,q=l.indexOf(m)>-1?g:Qi(n,k,d,K,o);c.push(q)}return a&&c.push(e[e.length-1]),c}function Br(e,t){return{monitorState:t(void 0,{}),nextActionId:1,actionsById:{0:At(zt)},stagedActionIds:[0],skippedActionIds:[],committedState:e,currentStateIndex:0,computedStates:[],isLocked:!1,isPaused:!1}}function _r(e,t,n,i,r={}){return s=>(l,o)=>{let{monitorState:a,actionsById:c,nextActionId:S,stagedActionIds:u,skippedActionIds:m,committedState:k,currentStateIndex:g,computedStates:d,isLocked:K,isPaused:P}=l||t;l||(c=Object.create(c));function q(j){let A=j,tt=u.slice(1,A+1);for(let V=0;V<tt.length;V++)if(d[V+1].error){A=V,tt=u.slice(1,A+1);break}else delete c[tt[V]];m=m.filter(V=>tt.indexOf(V)===-1),u=[0,...u.slice(A+1)],k=d[A].state,d=d.slice(A),g=g>A?g-A:0}function ct(){c={0:At(zt)},S=1,u=[0],m=[],k=d[g].state,g=0,d=[]}let E=0;switch(o.type){case Vi:{K=o.status,E=1/0;break}case Gi:{P=o.status,P?(u=[...u,S],c[S]=new gt({type:"@ngrx/devtools/pause"},+Date.now()),S++,E=u.length-1,d=d.concat(d[d.length-1]),g===u.length-2&&g++,E=1/0):ct();break}case Di:{c={0:At(zt)},S=1,u=[0],m=[],k=e,g=0,d=[];break}case Li:{ct();break}case Ni:{c={0:At(zt)},S=1,u=[0],m=[],g=0,d=[];break}case Bi:{let{id:j}=o;m.indexOf(j)===-1?m=[j,...m]:m=m.filter(tt=>tt!==j),E=u.indexOf(j);break}case _i:{let{start:j,end:A,active:tt}=o,V=[];for(let Jt=j;Jt<A;Jt++)V.push(Jt);tt?m=Ri(m,V):m=[...m,...V],E=u.indexOf(j);break}case Hi:{g=o.index,E=1/0;break}case zi:{let j=u.indexOf(o.actionId);j!==-1&&(g=j),E=1/0;break}case Ui:{u=Ri(u,m),m=[],g=Math.min(g,u.length-1);break}case It:{if(K)return l||t;if(P||l&&Ae(l.computedStates[g],o,r.predicate,r.actionsSafelist,r.actionsBlocklist)){let A=d[d.length-1];d=[...d.slice(0,-1),Qi(s,o.action,A.state,A.error,n)],E=1/0;break}r.maxAge&&u.length===r.maxAge&&q(1),g===u.length-1&&g++;let j=S++;c[j]=o,u=[...u,j],E=u.length-1;break}case ye:{({monitorState:a,actionsById:c,nextActionId:S,stagedActionIds:u,skippedActionIds:m,committedState:k,currentStateIndex:g,computedStates:d,isLocked:K,isPaused:P}=o.nextLiftedState);break}case ie:{E=0,r.maxAge&&u.length>r.maxAge&&(d=Ht(d,E,s,k,c,u,m,n,P),q(u.length-r.maxAge),E=1/0);break}case re:{if(d.filter(A=>A.error).length>0)E=0,r.maxAge&&u.length>r.maxAge&&(d=Ht(d,E,s,k,c,u,m,n,P),q(u.length-r.maxAge),E=1/0);else{if(!P&&!K){g===u.length-1&&g++;let A=S++;c[A]=new gt(o,+Date.now()),u=[...u,A],E=u.length-1,d=Ht(d,E,s,k,c,u,m,n,P)}d=d.map(A=>at(Y({},A),{state:s(A.state,Ur)})),g=u.length-1,r.maxAge&&u.length>r.maxAge&&q(u.length-r.maxAge),E=1/0}break}default:{E=1/0;break}}return d=Ht(d,E,s,k,c,u,m,n,P),a=i(a,o),{monitorState:a,actionsById:c,nextActionId:S,stagedActionIds:u,skippedActionIds:m,committedState:k,currentStateIndex:g,computedStates:d,isLocked:K,isPaused:P}}}var ki=(()=>{let t=class t{constructor(i,r,s,l,o,a,c,S){let u=Br(c,S.monitor),m=_r(c,u,a,S.monitor,S),k=lt(lt(r.asObservable().pipe(Le(1)),l.actions$).pipe(p(At)),i,l.liftedActions$).pipe(je(Ce)),g=s.pipe(p(m)),d=Wi(S.connectInZone),K=new we(1);this.liftedStateSubscription=k.pipe(Ue(g),Pi(d),De(({state:ct},[E,j])=>{let A=j(ct,E);return E.type!==It&&Ji(S)&&(A=Nr(A,S.predicate,S.actionsSafelist,S.actionsBlocklist)),l.notify(E,A),{state:A,action:E}},{state:u,action:null})).subscribe(({state:ct,action:E})=>{if(K.next(ct),E.type===It){let j=E.action;o.next(j)}}),this.extensionStartSubscription=l.start$.pipe(Pi(d)).subscribe(()=>{this.refresh()});let P=K.asObservable(),q=P.pipe(p(qi));Object.defineProperty(q,"state",{value:ei(q,{manualCleanup:!0,requireSync:!0})}),this.dispatcher=i,this.liftedState=P,this.state=q}ngOnDestroy(){this.liftedStateSubscription.unsubscribe(),this.extensionStartSubscription.unsubscribe()}dispatch(i){this.dispatcher.next(i)}next(i){this.dispatcher.next(i)}error(i){}complete(){}performAction(i){this.dispatch(new gt(i,+Date.now()))}refresh(){this.dispatch(new ae)}reset(){this.dispatch(new le(+Date.now()))}rollback(){this.dispatch(new fe(+Date.now()))}commit(){this.dispatch(new pe(+Date.now()))}sweep(){this.dispatch(new ue)}toggleAction(i){this.dispatch(new me(i))}jumpToAction(i){this.dispatch(new he(i))}jumpToState(i){this.dispatch(new de(i))}importState(i){this.dispatch(new ge(i))}lockChanges(i){this.dispatch(new ve(i))}pauseRecording(i){this.dispatch(new Se(i))}};t.\u0275fac=function(r){return new(r||t)(f(Gt),f(Ft),f(oi),f(Yi),f(jt),f(Tt),f(ri),f(Vt))},t.\u0275prov=y({token:t,factory:t.\u0275fac});let e=t;return e})();function Pi({ngZone:e,connectInZone:t}){return n=>t?new St(i=>n.subscribe({next:r=>e.run(()=>i.next(r)),error:r=>e.run(()=>i.error(r)),complete:()=>e.run(()=>i.complete())})):n}var Hr=new N("@ngrx/store-devtools Is Devtools Extension or Monitor Present");function zr(e,t){return!!e||t.monitor!==Ki}function Vr(){let e="__REDUX_DEVTOOLS_EXTENSION__";return typeof window=="object"&&typeof window[e]<"u"?window[e]:null}function Gr(e={}){return te([Yi,Gt,ki,{provide:$i,useValue:e},{provide:Hr,deps:[Ee,Vt],useFactory:zr},{provide:Ee,useFactory:Vr},{provide:Vt,deps:[$i],useFactory:kr},{provide:si,deps:[ki],useFactory:Kr},{provide:ni,useExisting:Gt}])}function Kr(e){return e.state}var tr=(()=>{let t=class t{static instrument(i={}){return{ngModule:t,providers:[Gr(i)]}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=H({type:t}),t.\u0275inj=_({});let e=t;return e})();var qr={dispatch:!0,functional:!1,useEffectsErrorHandler:!0},qt="__@ngrx/effects_create__";function b(e,t={}){let n=t.functional?e:e(),i=Y(Y({},qr),t);return Object.defineProperty(n,qt,{value:i}),n}function Zr(e){return Object.getOwnPropertyNames(e).filter(i=>e[i]&&e[i].hasOwnProperty(qt)?e[i][qt].hasOwnProperty("dispatch"):!1).map(i=>{let r=e[i][qt];return Y({propertyName:i},r)})}function Xr(e){return Zr(e)}function or(e){return Object.getPrototypeOf(e)}function Jr(e){return!!e.constructor&&e.constructor.name!=="Object"&&e.constructor.name!=="Function"}function nr(e){return typeof e=="function"}function er(e){return e.filter(nr)}function Wr(e){return e instanceof N||nr(e)}function Yr(e,t,n){let i=or(e),s=!!i&&i.constructor.name!=="Object"?i.constructor.name:null,l=Xr(e).map(({propertyName:o,dispatch:a,useEffectsErrorHandler:c})=>{let S=typeof e[o]=="function"?e[o]():e[o],u=c?n(S,t):S;return a===!1?u.pipe(Re()):u.pipe(Pe()).pipe(p(k=>({effect:e[o],notification:k,propertyName:o,sourceName:s,sourceInstance:e})))});return lt(...l)}var Qr=10;function sr(e,t,n=Qr){return e.pipe(w(i=>(t&&t.handleError(i),n<=1?e:sr(e,t,n-1))))}var ot=(()=>{let t=class t extends St{constructor(i){super(),i&&(this.source=i)}lift(i){let r=new t;return r.source=this,r.operator=i,r}};t.\u0275fac=function(r){return new(r||t)(f(jt))},t.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function x(...e){return Z(t=>e.some(n=>typeof n=="string"?n===t.type:n.type===t.type))}var cr=new N("@ngrx/effects Internal Root Guard"),Kt=new N("@ngrx/effects User Provided Effects"),Ie=new N("@ngrx/effects Internal Root Effects"),ar=new N("@ngrx/effects Internal Root Effects Instances"),ir=new N("@ngrx/effects Internal Feature Effects"),lr=new N("@ngrx/effects Internal Feature Effects Instance Groups"),to=new N("@ngrx/effects Effects Error Handler",{providedIn:"root",factory:()=>sr}),fr="@ngrx/effects/init",nn=ii(fr);function eo(e,t){if(e.notification.kind==="N"){let n=e.notification.value;!io(n)&&t.handleError(new Error(`Effect ${ro(e)} dispatched an invalid action: ${oo(n)}`))}}function io(e){return typeof e!="function"&&e&&e.type&&typeof e.type=="string"}function ro({propertyName:e,sourceInstance:t,sourceName:n}){let i=typeof t[e]=="function";return!!n?`"${n}.${String(e)}${i?"()":""}"`:`"${String(e)}()"`}function oo(e){try{return JSON.stringify(e)}catch{return e}}var no="ngrxOnIdentifyEffects";function so(e){return be(e,no)}var co="ngrxOnRunEffects";function ao(e){return be(e,co)}var lo="ngrxOnInitEffects";function fo(e){return be(e,lo)}function be(e,t){return e&&t in e&&typeof e[t]=="function"}var pr=(()=>{let t=class t extends Te{constructor(i,r){super(),this.errorHandler=i,this.effectsErrorHandler=r}addEffects(i){this.next(i)}toActions(){return this.pipe(Qt(i=>Jr(i)?or(i):i),Wt(i=>i.pipe(Qt(po))),Wt(i=>{let r=i.pipe(ke(l=>uo(this.errorHandler,this.effectsErrorHandler)(l)),p(l=>(eo(l,this.errorHandler),l.notification)),Z(l=>l.kind==="N"&&l.value!=null),Me()),s=i.pipe(bt(1),Z(fo),p(l=>l.ngrxOnInitEffects()));return lt(r,s)}))}};t.\u0275fac=function(r){return new(r||t)(f(Tt),f(to))},t.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();function po(e){return so(e)?e.ngrxOnIdentifyEffects():""}function uo(e,t){return n=>{let i=Yr(n,e,t);return ao(n)?n.ngrxOnRunEffects(i):i}}var ur=(()=>{let t=class t{get isStarted(){return!!this.effectsSubscription}constructor(i,r){this.effectSources=i,this.store=r,this.effectsSubscription=null}start(){this.effectsSubscription||(this.effectsSubscription=this.effectSources.toActions().subscribe(this.store))}ngOnDestroy(){this.effectsSubscription&&(this.effectsSubscription.unsubscribe(),this.effectsSubscription=null)}};t.\u0275fac=function(r){return new(r||t)(f(pr),f(z))},t.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})(),mr=(()=>{let t=class t{constructor(i,r,s,l,o,a,c){this.sources=i,r.start();for(let S of l)i.addEffects(S);s.dispatch({type:fr})}addEffects(i){this.sources.addEffects(i)}};t.\u0275fac=function(r){return new(r||t)(f(pr),f(ur),f(z),f(ar),f(oe,8),f(ne,8),f(cr,8))},t.\u0275mod=H({type:t}),t.\u0275inj=_({});let e=t;return e})(),mo=(()=>{let t=class t{constructor(i,r,s,l){let o=r.flat();for(let a of o)i.addEffects(a)}};t.\u0275fac=function(r){return new(r||t)(f(mr),f(lr),f(oe,8),f(ne,8))},t.\u0275mod=H({type:t}),t.\u0275inj=_({});let e=t;return e})(),dr=(()=>{let t=class t{static forFeature(...i){let r=i.flat(),s=er(r);return{ngModule:mo,providers:[s,{provide:ir,multi:!0,useValue:r},{provide:Kt,multi:!0,useValue:[]},{provide:lr,multi:!0,useFactory:rr,deps:[ir,Kt]}]}}static forRoot(...i){let r=i.flat(),s=er(r);return{ngModule:mr,providers:[s,{provide:Ie,useValue:[r]},{provide:cr,useFactory:ho},{provide:Kt,multi:!0,useValue:[]},{provide:ar,useFactory:rr,deps:[Ie,Kt]}]}}};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=H({type:t}),t.\u0275inj=_({});let e=t;return e})();function rr(e,t){let n=[];for(let i of e)n.push(...i);for(let i of t)n.push(...i);return n.map(i=>Wr(i)?ft(i):i)}function ho(){let e=ft(ur,{optional:!0,skipSelf:!0}),t=ft(Ie,{self:!0});if(!(t.length===1&&t[0].length===0)&&e)throw new TypeError("EffectsModule.forRoot() called twice. Feature modules should use EffectsModule.forFeature() instead.");return"guarded"}var hr=(()=>{let t=class t{constructor(i,r){this.store=i,this.fb=r,this.loginForm=this.fb.group({email:["",nt.required],password:["",nt.required]})}ngOnInit(){this.haveLoginErrors$=this.store.select(i=>Rt(i)),this.loginErrors$=this.store.select(i=>Mt(i)),this.isFormSubmitting$=this.store.select(i=>i[mt].isSubmittingLoginRequest)}login(){let i={email:this.loginForm.value.email,password:this.loginForm.value.password};this.store.dispatch(G.login({loginRequest:i}))}};t.\u0275fac=function(r){return new(r||t)(et(z),et(Bt))},t.\u0275cmp=X({type:t,selectors:[["rw-login"]],decls:24,vars:16,consts:[[1,"auth-page"],[1,"container","page"],[1,"row"],[1,"col-md-6","offset-md-3","col-xs-12"],[1,"text-xs-center"],["routerLink","/register"],[1,"error-messages",3,"hidden"],[3,"formGroup","ngSubmit"],[1,"form-group"],["formControlName","email","type","text","placeholder","Email",1,"form-control","form-control-lg",3,"disabled"],["formControlName","password","type","password","placeholder","Password",1,"form-control","form-control-lg",3,"disabled"],["type","submit",1,"btn","btn-lg","btn-primary","pull-xs-right",3,"disabled","click"]],template:function(r,s){r&1&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),C(5,"Sign in"),v(),h(6,"p",4)(7,"a",5),C(8,"Need an account?"),v()(),h(9,"ul",6),L(10,"async"),h(11,"li"),C(12),L(13,"async"),v()(),h(14,"form",7),Et("ngSubmit",function(){return s.login()}),h(15,"fieldset",8),B(16,"input",9),L(17,"async"),v(),h(18,"fieldset",8),B(19,"input",10),L(20,"async"),v(),h(21,"button",11),Et("click",function(){return s.login()}),L(22,"async"),C(23," Sign in "),v()()()()()()),r&2&&(M(9),Q("hidden",U(10,6,s.haveLoginErrors$)===!1),M(3),wt(U(13,8,s.loginErrors$)),M(2),Q("formGroup",s.loginForm),M(2),Q("disabled",U(17,10,s.isFormSubmitting$)),M(3),Q("disabled",U(20,12,s.isFormSubmitting$)),M(2),Q("disabled",U(22,14,s.isFormSubmitting$)))},dependencies:[rt,Nt,kt,Pt,Dt,Lt,Ut,pt],encapsulation:2});let e=t;return e})();var gr=(()=>{let t=class t{constructor(i,r){this.store=i,this.fb=r,this.registerForm=this.fb.group({email:["",nt.required],username:["",nt.required],password:["",nt.required]})}ngOnInit(){this.haveRegisterErrors$=this.store.select(i=>Rt(i)),this.registerErrors$=this.store.select(i=>Mt(i)),this.isFormSubmitting$=this.store.select(i=>i[mt].isSubmittingLoginRequest)}register(){let i={email:this.registerForm.value.email,username:this.registerForm.value.username,password:this.registerForm.value.password};this.store.dispatch(G.register({registerRequest:i}))}};t.\u0275fac=function(r){return new(r||t)(et(z),et(Bt))},t.\u0275cmp=X({type:t,selectors:[["rw-register"]],decls:25,vars:7,consts:[[1,"auth-page"],[1,"container","page"],[1,"row"],[1,"col-md-6","offset-md-3","col-xs-12"],[1,"text-xs-center"],["routerLink","/login"],[1,"error-messages",3,"hidden"],[3,"formGroup","ngSubmit"],[1,"form-group"],["formControlName","username","type","text","placeholder","Username",1,"form-control","form-control-lg"],["formControlName","email","type","text","placeholder","Email",1,"form-control","form-control-lg"],["formControlName","password","type","password","placeholder","Password",1,"form-control","form-control-lg"],[1,"btn","btn-lg","btn-primary","pull-xs-right"]],template:function(r,s){r&1&&(h(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"h1",4),C(5," Sign up "),v(),h(6,"p",4)(7,"a",5),C(8," Have an account? "),v()(),h(9,"ul",6),L(10,"async"),h(11,"li"),C(12),L(13,"async"),v(),h(14,"li"),C(15,"That email is already taken"),v()(),h(16,"form",7),Et("ngSubmit",function(){return s.register()}),h(17,"fieldset",8),B(18,"input",9),v(),h(19,"fieldset",8),B(20,"input",10),v(),h(21,"fieldset",8),B(22,"input",11),v(),h(23,"button",12),C(24," Sign up "),v()()()()()()),r&2&&(M(9),Q("hidden",U(10,3,s.haveRegisterErrors$)===!1),M(3),wt(U(13,5,s.registerErrors$)),M(4),Q("formGroup",s.registerForm))},dependencies:[rt,Nt,kt,Pt,Dt,Lt,Ut,pt],encapsulation:2});let e=t;return e})();var vr=[{path:"login",component:hr},{path:"register",component:gr}];var vt=(()=>{let t=class t{constructor(i,r){this.http=i,this.jwtService=r}login(i){return this.http.post(`${O.API_BASE_URL}/users/login`,{user:i}).pipe(p(r=>r.user),D(r=>{console.log("returnedUser",r),console.log("returnedUser.token",r.token),this.jwtService.saveToken(r.token)}))}register(i){return this.http.post(`${O.API_BASE_URL}/users`,{user:i}).pipe(p(r=>r.user),D(r=>{console.log("returnedUser",r),console.log("returnedUser.token",r.token),this.jwtService.saveToken(r.token)}))}followUser(i){return this.http.post(`${O.API_BASE_URL}/profiles/${i}/follow`,{}).pipe(p(r=>r.profile))}unfollowUser(i){return this.http.delete(`${O.API_BASE_URL}/profiles/${i}/follow`,{}).pipe(p(r=>r.profile))}};t.\u0275fac=function(r){return new(r||t)(f(it),f(ht))},t.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Er=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=H({type:t}),t.\u0275inj=_({providers:[vt],imports:[Ct.forChild(vr),dt]});let e=t;return e})();var Xt=(()=>{let t=class t{constructor(i){this.http=i}createArticle(i){return this.http.post(`${O.API_BASE_URL}/articles`,{article:i}).pipe(p(r=>r.article))}updateArticle(i){return this.http.put(`${O.API_BASE_URL}/articles/${i.slug}`,{article:i}).pipe(p(r=>r.article))}convertFilterToHttpParams(i){i==null&&alert("filter is null or undefined");let r=new Je,s=Object(i);return console.log("Filter as object at article service convertFilterToHttpParams:",s),Object.keys(i).forEach(l=>{(s[l]||s[l]===0)&&(r=r.append(l,s[l]))}),console.log(r.keys()),r}listArticles(i,r){let s="articles";r===pi.USER&&(s="articles/feed");let l=this.convertFilterToHttpParams(i);return this.http.get(`${O.API_BASE_URL}/${s}`,{params:l}).pipe(p(o=>({articles:o.articles,articlesCount:o.articlesCount})))}favoriteArticle(i){return this.http.post(`${O.API_BASE_URL}/articles/${i}/favorite`,{}).pipe(p(r=>r.article))}unfavoriteArticle(i){return this.http.delete(`${O.API_BASE_URL}/articles/${i}/favorite`).pipe(p(r=>r.article))}getArticle(i){return this.http.get(`${O.API_BASE_URL}/articles/${i}`).pipe(p(r=>r.article))}deleteArticle(i){return this.http.delete(`${O.API_BASE_URL}/articles/${i}`)}};t.\u0275fac=function(r){return new(r||t)(f(it))},t.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Ar=(()=>{let t=class t{constructor(i,r,s,l,o){this.store=i,this.actions$=r,this.tagService=s,this.articleService=l,this.router=o,this.tagLoadEffects$=b(()=>this.actions$.pipe(x($t.getTags),T(()=>this.tagService.getTags().pipe(p(a=>$t.getTagsSuccess({loadedTags:a})),w(a=>I($t.getTagsFailure({errors:a}))))))),this.editorFormSubmmitedEffects$=b(()=>this.actions$.pipe(x(J.submitEditorForm),T(a=>a.article.slug===null||a.article.slug===void 0||a.article.slug===""?I(J.createNewArticle({article:a.article})):I(J.updateArticle({article:a.article}))))),this.editorCreateArticleEffects$=b(()=>this.actions$.pipe(x(J.createNewArticle),T(a=>this.articleService.createArticle(a.article).pipe(p(c=>J.submitEditorFormSuccess({submittedArticle:c})),D(c=>this.router.navigateByUrl("/")),w(c=>I(J.submitEditorFormFailure({errors:c}))))))),this.editorUpdateArticleEffects$=b(()=>this.actions$.pipe(x(J.updateArticle),T(a=>this.articleService.updateArticle(a.article).pipe(p(c=>J.submitEditorFormSuccess({submittedArticle:c})),D(c=>this.router.navigateByUrl("/")),w(c=>I(J.submitEditorFormFailure({errors:c}))))))),this.homeArticlesReloadEffects$=b(()=>this.actions$.pipe(x(F.reloadArticles,F.reloadArticlesWithoutDisplayIsLoading),T(()=>{let a=null,c=null,S=this.store.select(m=>hi(m)).pipe(D(m=>a=m)).subscribe(),u=this.store.select(m=>di(m)).pipe(D(m=>c=m)).subscribe();return console.log("filterValue",a),console.log("feedTypeValue",c),S.unsubscribe(),u.unsubscribe(),this.articleService.listArticles(a,c).pipe(p(m=>F.loadArticlesSuccess({loadedArticles:m.articles,totalArticlesCount:m.articlesCount})),w(m=>I(F.loadArticlesFailure({errors:m}))))}))),this.homeFilterByOrPageOrFeedChangeEffects$=b(()=>this.actions$.pipe(x(F.filterByTagChanged,F.filterByAuthorChanged,F.filterByFavoritedChanged,F.choosePage,F.setFeedType),p(()=>F.reloadArticles()))),this.favoriteArticleEffects$=b(()=>this.actions$.pipe(x(F.favoriteArticle),T(a=>this.articleService.favoriteArticle(a.articleSlug).pipe(p(c=>F.favoriteOrUnfavoriteArticleSuccess({returnArticle:c})),w(c=>I(F.favoriteOrUnfavoriteArticleFailure({errors:c}))))))),this.unfavoriteArticleEffects$=b(()=>this.actions$.pipe(x(F.unfavoriteArticle),T(a=>this.articleService.unfavoriteArticle(a.articleSlug).pipe(p(c=>F.favoriteOrUnfavoriteArticleSuccess({returnArticle:c})),w(c=>I(F.favoriteOrUnfavoriteArticleFailure({errors:c}))))))),this.afterFavoriteOrUnfavoriteArticleReloadArticlesEffects$=b(()=>this.actions$.pipe(x(F.favoriteOrUnfavoriteArticleSuccess),p(()=>F.reloadArticlesWithoutDisplayIsLoading())))}};t.\u0275fac=function(r){return new(r||t)(f(z),f(ot),f(Si),f(Xt),f(ut))},t.\u0275prov=y({token:t,factory:t.\u0275fac});let e=t;return e})();var Ir=(()=>{let t=class t{constructor(i,r,s,l,o){this.actions$=i,this.userService=r,this.settingsService=s,this.jwtService=l,this.router=o,this.loginEffect$=b(()=>this.actions$.pipe(x(G.login),T(a=>this.userService.login(a.loginRequest).pipe(p(c=>G.loginSuccess({returnedUser:c})),D(c=>this.router.navigateByUrl("/")),w(c=>I(G.loginFailure({errors:c}))))))),this.registerEffect$=b(()=>this.actions$.pipe(x(G.register),T(a=>this.userService.register(a.registerRequest).pipe(p(c=>G.registerSuccess({returnedUser:c})),D(c=>this.router.navigateByUrl("/")),w(c=>I(G.loginFailure({errors:c}))))))),this.settingsEffect$=b(()=>this.actions$.pipe(x(Ot.updateSettings),T(a=>this.settingsService.updateSettings(a.settingsRequest).pipe(p(c=>Ot.updateSettingsSuccess({updatedUser:c})),w(c=>I(Ot.updateSettingsFailure({errors:c}))))))),this.logoutEffect$=b(()=>this.actions$.pipe(x(se.logout),D(a=>{this.jwtService.destroyToken(),this.router.navigateByUrl("/")}),T(a=>I(se.logoutSuccess()))))}};t.\u0275fac=function(r){return new(r||t)(f(ot),f(vt),f(Ei),f(ht),f(ut))},t.\u0275prov=y({token:t,factory:t.\u0275fac});let e=t;return e})();var br=(()=>{let t=class t{constructor(i){this.http=i}getProfileOfUsername(i){return this.http.get(`${O.API_BASE_URL}/profiles/${i}`).pipe(p(r=>r.profile))}};t.\u0275fac=function(r){return new(r||t)(f(it))},t.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var xr=(()=>{let t=class t{constructor(i,r,s){this.actions$=i,this.profileService=r,this.userService=s,this.profileEffect$=b(()=>this.actions$.pipe(x(W.profileOfUserSelected),T(l=>this.profileService.getProfileOfUsername(l.username).pipe(p(o=>W.getProfileSuccess({returnedProfile:o})),w(o=>I(W.getProfileFailure({errors:o}))))))),this.followProfileEffect$=b(()=>this.actions$.pipe(x(W.followProfile),T(l=>this.userService.followUser(l.username).pipe(p(o=>W.followOrUnfollowProfileSuccess({returnedProfile:o})),w(o=>I(W.followOrUnfollowProfileFailure({errors:o}))))))),this.unfollowProfileEffect$=b(()=>this.actions$.pipe(x(W.unfollowProfile),T(l=>this.userService.unfollowUser(l.username).pipe(p(o=>W.followOrUnfollowProfileSuccess({returnedProfile:o})),w(o=>I(W.followOrUnfollowProfileFailure({errors:o})))))))}};t.\u0275fac=function(r){return new(r||t)(f(ot),f(br),f(vt))},t.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Tr=(()=>{let t=class t{constructor(i){this.http=i}getArticleComments(i){return this.http.get(`${O.API_BASE_URL}/articles/${i}/comments`).pipe(p(r=>r.comments))}addCommentToArticle(i,r){return this.http.post(`${O.API_BASE_URL}/articles/${i}/comments`,{comment:{body:r}}).pipe(p(s=>s.comment))}deleteCommentFromArticle(i,r){return this.http.delete(`${O.API_BASE_URL}/articles/${i}/comments/${r}`)}};t.\u0275fac=function(r){return new(r||t)(f(it))},t.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var wr=(()=>{let t=class t{constructor(i,r,s,l){this.actions$=i,this.articleService=r,this.commentService=s,this.router=l,this.articleEffects$=b(()=>this.actions$.pipe(x($.selectArticle),p(o=>$.loadArticle({selectedArticleSlug:o.selectedArticleSlug,displayIsLoading:o.displayIsLoading})))),this.articleLoadCompletedEffects$=b(()=>this.actions$.pipe(x($.loadArticle),T(o=>this.articleService.getArticle(o.selectedArticleSlug).pipe(p(a=>$.loadArticleSuccess({returnedArticle:a})),w(a=>I($.loadArticleFailure({errors:a}))))))),this.afterFavoriteOrUnfavoriteArticleReloadSelectedArticleEffects$=b(()=>this.actions$.pipe(x(F.favoriteOrUnfavoriteArticleSuccess),p(o=>$.loadArticle({selectedArticleSlug:o.returnArticle.slug,displayIsLoading:!1})))),this.deleteArticleEffects$=b(()=>this.actions$.pipe(x($.deleteArticle),D(()=>this.router.navigateByUrl("/")),T(o=>this.articleService.deleteArticle(o.articleSlug).pipe(p(a=>$.deleteArticleSuccess()),w(a=>I($.deleteArticleFailure({errors:a}))))))),this.reloadArticleCommentsEffects$=b(()=>this.actions$.pipe(x($.reloadArticleComments),T(o=>this.commentService.getArticleComments(o.articleSlug).pipe(p(a=>$.reloadArticleCommentsSuccess({returnedComments:a})),w(a=>I($.reloadArticleCommentsFailure({errors:a}))))))),this.addCommentToArticleEffects$=b(()=>this.actions$.pipe(x($.addCommentToArticle),T(o=>{let a=o.articleSlug;return this.commentService.addCommentToArticle(o.articleSlug,o.commentBody).pipe(p(c=>$.reloadArticleComments({articleSlug:a})),w(c=>I($.reloadArticleCommentsFailure({errors:c}))))}))),this.deleteCommentFromArticleEffects$=b(()=>this.actions$.pipe(x($.deleteCommentFromArticle),T(o=>{let a=o.articleSlug;return this.commentService.deleteCommentFromArticle(o.articleSlug,o.commentId).pipe(p(c=>$.reloadArticleComments({articleSlug:a})),w(c=>I($.reloadArticleCommentsFailure({errors:c}))))})))}};t.\u0275fac=function(r){return new(r||t)(f(ot),f(Xt),f(Tr),f(ut))},t.\u0275prov=y({token:t,factory:t.\u0275fac,providedIn:"root"});let e=t;return e})();var Cr=(()=>{let t=class t{};t.\u0275fac=function(r){return new(r||t)},t.\u0275mod=H({type:t,bootstrap:[Ti]}),t.\u0275inj=_({imports:[Qe,Xe,Ct.forRoot(wi),dt,Fi,Er,ci.forRoot({[ui]:mi,[mt]:ai,[gi]:vi,[yi]:Ai}),tr.instrument({maxAge:25,logOnly:!Ze(),autoPause:!0,traceLimit:25}),dr.forRoot([Ar,Ir,xr,wr])]});let e=t;return e})();var Eo=Ye().bootstrapModule(Cr);Eo.then(e=>console.log("Bootstrap success")).catch(e=>console.error(e));
